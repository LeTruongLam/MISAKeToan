{"ast":null,"code":"import { vModelText as _vModelText, createElementVNode as _createElementVNode, withDirectives as _withDirectives, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, vShow as _vShow, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, resolveDirective as _resolveDirective, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-f1fa32d2\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"combobox\"\n};\nconst _hoisted_2 = [\"src\"];\nconst _hoisted_3 = {\n  key: 0,\n  class: \"combobox__data\",\n  ref: \"combobox__data\"\n};\nconst _hoisted_4 = [\"value\", \"onClick\", \"onFocus\", \"onKeydown\", \"onKeyup\"];\nconst _hoisted_5 = {\n  class: \"combobox__item-icon\"\n};\nconst _hoisted_6 = [\"src\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _directive_clickoutside = _resolveDirective(\"clickoutside\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    class: \"input combobox__input\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.textInput = $event),\n    onInput: _cache[1] || (_cache[1] = (...args) => $options.inputOnChange && $options.inputOnChange(...args)),\n    onKeydown: _cache[2] || (_cache[2] = (...args) => $options.selecItemUpDown && $options.selecItemUpDown(...args))\n  }, null, 544 /* HYDRATE_EVENTS, NEED_PATCH */), [[_vModelText, $data.textInput]]), _createElementVNode(\"button\", {\n    class: \"button combobox__button\",\n    onClick: _cache[3] || (_cache[3] = (...args) => $options.btnSelectDataOnClick && $options.btnSelectDataOnClick(...args)),\n    onKeydown: _cache[4] || (_cache[4] = (...args) => $options.selecItemUpDown && $options.selecItemUpDown(...args)),\n    tabindex: \"-1\"\n  }, [_createCommentVNode(\" <i class=\\\"fa-solid fa-chevron-down\\\"></i> \"), _createElementVNode(\"img\", {\n    src: require('../src/icon/down.png'),\n    alt: \"\",\n    srcset: \"\",\n    width: \"24\",\n    height: \"24\"\n  }, null, 8 /* PROPS */, _hoisted_2)], 32 /* HYDRATE_EVENTS */), $data.isShowListData ? _withDirectives((_openBlock(), _createElementBlock(\"div\", _hoisted_3, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.dataFilter, (item, index) => {\n    return _openBlock(), _createElementBlock(\"a\", {\n      class: _normalizeClass([\"combobox__item\", {\n        'combobox__item--focus': index == $data.indexItemFocus,\n        'combobox__item--selected': index == $data.indexItemSelected\n      }]),\n      key: item[this.propValue],\n      ref_for: true,\n      ref: 'toFocus_' + index,\n      value: item[this.propValue],\n      onClick: $event => $options.itemOnSelect(item, index),\n      onFocus: $event => $options.saveItemFocus(index),\n      onKeydown: $event => $options.selecItemUpDown(index),\n      onKeyup: $event => $options.selecItemUpDown(index),\n      tabindex: \"1\"\n    }, [_createElementVNode(\"div\", _hoisted_5, [_withDirectives(_createElementVNode(\"img\", {\n      src: require('../src/icon/check.png'),\n      alt: \"\",\n      srcset: \"\",\n      width: \"14\",\n      height: \"11\"\n    }, null, 8 /* PROPS */, _hoisted_6), [[_vShow, index == $data.indexItemSelected]])]), _createElementVNode(\"span\", null, _toDisplayString(item[this.propText]), 1 /* TEXT */)], 42 /* CLASS, PROPS, HYDRATE_EVENTS */, _hoisted_4);\n  }), 128 /* KEYED_FRAGMENT */))])), [[_directive_clickoutside, $options.hideListData]]) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["class","ref","_createElementBlock","_hoisted_1","_createElementVNode","type","$data","textInput","$event","onInput","_cache","args","$options","inputOnChange","onKeydown","selecItemUpDown","onClick","btnSelectDataOnClick","tabindex","_createCommentVNode","src","require","alt","srcset","width","height","isShowListData","_hoisted_3","_Fragment","_renderList","dataFilter","item","index","_normalizeClass","indexItemFocus","indexItemSelected","key","propValue","value","itemOnSelect","onFocus","saveItemFocus","onKeyup","_hoisted_5","_toDisplayString","propText","hideListData"],"sources":["C:\\Users\\Acer\\Documents\\Misa\\tuan 1\\web202307\\mf1731-ltlam\\vue\\misa-web7-vue\\node_modules\\ms-combobox\\src\\ms-combobox.vue"],"sourcesContent":["<template>\n  <div class=\"combobox\">\n    <input\n      type=\"text\"\n      class=\"input combobox__input\"\n      v-model=\"textInput\"\n      @input=\"inputOnChange\"\n      @keydown=\"selecItemUpDown\"\n    />\n    <button\n      class=\"button combobox__button\"\n      @click=\"btnSelectDataOnClick\"\n      @keydown=\"selecItemUpDown\"\n      tabindex=\"-1\"\n    >\n      <!-- <i class=\"fa-solid fa-chevron-down\"></i> -->\n      <img\n        :src=\"require('../src/icon/down.png')\"\n        alt=\"\"\n        srcset=\"\"\n        width=\"24\"\n        height=\"24\"\n      />\n    </button>\n    <div\n      v-if=\"isShowListData\"\n      class=\"combobox__data\"\n      ref=\"combobox__data\"\n      v-clickoutside=\"hideListData\"\n    >\n      <a\n        class=\"combobox__item\"\n        v-for=\"(item, index) in dataFilter\"\n        :class=\"{\n          'combobox__item--focus': index == indexItemFocus,\n          'combobox__item--selected': index == indexItemSelected,\n        }\"\n        :key=\"item[this.propValue]\"\n        :ref=\"'toFocus_' + index\"\n        :value=\"item[this.propValue]\"\n        @click=\"itemOnSelect(item, index)\"\n        @focus=\"saveItemFocus(index)\"\n        @keydown=\"selecItemUpDown(index)\"\n        @keyup=\"selecItemUpDown(index)\"\n        tabindex=\"1\"\n      >\n        <div class=\"combobox__item-icon\">\n          <img\n            v-show=\"index == indexItemSelected\"\n            :src=\"require('../src/icon/check.png')\"\n            alt=\"\"\n            srcset=\"\"\n            width=\"14\"\n            height=\"11\"\n          />\n        </div>\n        <span>{{ item[this.propText] }}</span>\n      </a>\n    </div>\n  </div>\n</template>\n<script>\n/* eslint-disable */\n/**\n * Gán sự kiện nhấn click chuột ra ngoài combobox data (ẩn data list đi)\n * NVMANH (31/07/2022)\n */\nconst clickoutside = {\n  mounted(el, binding, vnode, prevVnode) {\n    el.clickOutsideEvent = (event) => {\n      // Nếu element hiện tại không phải là element đang click vào\n      // Hoặc element đang click vào không phải là button trong combobox hiện tại thì ẩn đi.\n      if (\n        !(\n          (\n            el === event.target || // click phạm vi của combobox__data\n            el.contains(event.target) || //click vào element con của combobox__data\n            el.previousElementSibling.contains(event.target)\n          ) //click vào element button trước combobox data (nhấn vào button thì hiển thị)\n        )\n      ) {\n        // Thực hiện sự kiện tùy chỉnh:\n        binding.value(event, el);\n        // vnode.context[binding.expression](event); // vue 2\n      }\n    };\n    document.body.addEventListener(\"click\", el.clickOutsideEvent);\n  },\n  beforeUnmount: (el) => {\n    document.body.removeEventListener(\"click\", el.clickOutsideEvent);\n  },\n};\n\nfunction removeVietnameseTones(str) {\n  str = str.replace(/à|á|ạ|ả|ã|â|ầ|ấ|ậ|ẩ|ẫ|ă|ằ|ắ|ặ|ẳ|ẵ/g, \"a\");\n  str = str.replace(/è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ/g, \"e\");\n  str = str.replace(/ì|í|ị|ỉ|ĩ/g, \"i\");\n  str = str.replace(/ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ|ơ|ờ|ớ|ợ|ở|ỡ/g, \"o\");\n  str = str.replace(/ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ/g, \"u\");\n  str = str.replace(/ỳ|ý|ỵ|ỷ|ỹ/g, \"y\");\n  str = str.replace(/đ/g, \"d\");\n  str = str.replace(/À|Á|Ạ|Ả|Ã|Â|Ầ|Ấ|Ậ|Ẩ|Ẫ|Ă|Ằ|Ắ|Ặ|Ẳ|Ẵ/g, \"A\");\n  str = str.replace(/È|É|Ẹ|Ẻ|Ẽ|Ê|Ề|Ế|Ệ|Ể|Ễ/g, \"E\");\n  str = str.replace(/Ì|Í|Ị|Ỉ|Ĩ/g, \"I\");\n  str = str.replace(/Ò|Ó|Ọ|Ỏ|Õ|Ô|Ồ|Ố|Ộ|Ổ|Ỗ|Ơ|Ờ|Ớ|Ợ|Ở|Ỡ/g, \"O\");\n  str = str.replace(/Ù|Ú|Ụ|Ủ|Ũ|Ư|Ừ|Ứ|Ự|Ử|Ữ/g, \"U\");\n  str = str.replace(/Ỳ|Ý|Ỵ|Ỷ|Ỹ/g, \"Y\");\n  str = str.replace(/Đ/g, \"D\");\n  // Some system encode vietnamese combining accent as individual utf-8 characters\n  // Một vài bộ encode coi các dấu mũ, dấu chữ như một kí tự riêng biệt nên thêm hai dòng này\n  str = str.replace(/\\u0300|\\u0301|\\u0303|\\u0309|\\u0323/g, \"\"); // ̀ ́ ̃ ̉ ̣  huyền, sắc, ngã, hỏi, nặng\n  str = str.replace(/\\u02C6|\\u0306|\\u031B/g, \"\"); // ˆ ̆ ̛  Â, Ê, Ă, Ơ, Ư\n  // Remove extra spaces\n  // Bỏ các khoảng trắng liền nhau\n  str = str.replace(/ + /g, \" \");\n  str = str.trim();\n  // Remove punctuations\n  // Bỏ dấu câu, kí tự đặc biệt\n  str = str.replace(\n    /!|@|%|\\^|\\*|\\(|\\)|\\+|\\=|\\<|\\>|\\?|\\/|,|\\.|\\:|\\;|\\'|\\\"|\\&|\\#|\\[|\\]|~|\\$|_|`|-|{|}|\\||\\\\/g,\n    \" \"\n  );\n  return str;\n}\n\nconst keyCode = {\n  Enter: 13,\n  ArrowUp: 38,\n  ArrowDown: 40,\n  ESC: 27,\n};\n\nexport default {\n  name: \"MSCombobox\",\n  directives: {\n    clickoutside,\n  },\n  props: {\n    value: null,\n    url: String,\n    propValue: String,\n    propText: String,\n    isLoadData: {\n      type: Boolean,\n      default: true,\n    },\n  },\n  methods: {\n    /**\n     * Lưu lại index của item đã focus\n     * NVMANH (31/07/2022)\n     */\n    saveItemFocus(index) {\n      this.indexItemFocus = index;\n    },\n\n    /**\n     * Ẩn danh sách item\n     * NVMANH (31/07/2022)\n     */\n    hideListData() {\n      this.isShowListData = false;\n    },\n\n    /**\n     * Nhấn vào button thì hiển thị hoặc ẩn List Item\n     * NVMANH (31/07/2022)\n     */\n    btnSelectDataOnClick() {\n      this.dataFilter = this.data;\n      this.isShowListData = !this.showListData;\n    },\n\n    /**\n     * Click chọn item trong danh sách\n     * NVMANH (31/07/2022)\n     */\n    itemOnSelect(item, index) {\n      const text = item[this.propText];\n      const value = item[this.propValue];\n      this.textInput = text; // Hiển thị text lên input.\n      this.indexItemSelected = index;\n      this.isShowListData = false;\n      this.$emit(\"getValue\", value, text, item);\n    },\n\n    /**\n     * Nhập text thì thực hiện filter dữ liệu và hiển thị\n     * NVMANH (31/07/2022)\n     */\n    inputOnChange() {\n      var me = this;\n      // Thực hiện lọc các phần tử phù hợp trong data:\n      this.dataFilter = this.data.filter((e) => {\n        let text = removeVietnameseTones(me.textInput)\n          .toLowerCase()\n          .replace(\" \", \"\");\n        let textOfItem = removeVietnameseTones(e[me.propText])\n          .toLowerCase()\n          .replace(\" \", \"\");\n        return textOfItem.includes(text);\n      });\n      this.isShowListData = true;\n    },\n\n    /**\n     * Lựa chọn item bằng cách nhấn các phím lên, xuống trên bàn phím\n     * NVMANH (31/07/2022)\n     */\n    selecItemUpDown() {\n      var me = this;\n      var keyCodePress = event.keyCode;\n      var elToFocus = null;\n      switch (keyCodePress) {\n        case keyCode.ESC:\n          this.isShowListData = false;\n          break;\n        case keyCode.ArrowDown:\n          this.isShowListData = true;\n          elToFocus = this.$refs[`toFocus_${me.indexItemFocus + 1}`];\n          if (\n            this.indexItemFocus == null ||\n            !elToFocus ||\n            elToFocus.length == 0\n          ) {\n            this.indexItemFocus = 0;\n          } else {\n            this.indexItemFocus += 1;\n          }\n          break;\n        case keyCode.ArrowUp:\n          this.isShowListData = true;\n          elToFocus = this.$refs[`toFocus_${me.indexItemFocus - 1}`];\n          if (\n            this.indexItemFocus == null ||\n            !elToFocus ||\n            elToFocus.length == 0\n          ) {\n            this.indexItemFocus = this.dataFilter.length - 1;\n          } else {\n            this.indexItemFocus -= 1;\n          }\n          break;\n        case keyCode.Enter:\n          elToFocus = this.$refs[`toFocus_${me.indexItemFocus}`];\n          if (elToFocus && elToFocus.length > 0) {\n            elToFocus[0].click();\n            this.isShowListData = false;\n          }\n          break;\n        default:\n          break;\n      }\n    },\n  },\n\n  created() {\n    // Thực hiện lấy dữ liệu từ api:\n    if (this.url) {\n      fetch(this.url)\n        .then((res) => res.json())\n        .then((res) => {\n          this.data = res;\n          this.dataFilter = res;\n        })\n        .catch((res) => {\n          console.log(res);\n        });\n    }\n  },\n  data() {\n    return {\n      data: [], // data gốc\n      textInput: null,\n      dataFilter: [], // data đã được filter\n      isShowListData: false, // Hiển thị list data hay không\n      indexItemFocus: null, // Index của item focus hiện tại\n      indexItemSelected: null, // Index của item được selected\n    };\n  },\n};\n</script>\n<style scoped>\n.combobox {\n  position: relative;\n  /* flex-direction: row; */\n  border-radius: 4px;\n  box-sizing: border-box;\n}\n\n.combobox__input,\nselect {\n  width: 100%;\n  height: 40px;\n  flex: 1;\n  padding-right: 56px !important;\n  padding-left: 16px;\n  border-radius: 4px;\n  outline: none;\n  border: 1px solid #bbbbbb;\n  font-family: MISA Fonts;\n  box-sizing: border-box;\n}\n\n.combobox__input:focus,\n.combobox__input:focus ~ .combobox__button {\n  border-color: #019160;\n}\n\n.combobox__button {\n  position: absolute;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: rgb(90, 90, 90);\n  border-radius: 0 4px 4px 0;\n  right: 0px;\n  top: 0px;\n  border: 1px solid #bbbbbb;\n  border-left: unset;\n  height: 40px;\n  width: 40px;\n  border-radius: 0 4px 4px 0px;\n  background-color: #fff;\n  cursor: pointer;\n  min-width: unset !important;\n  outline: none;\n  box-sizing: border-box;\n  opacity: 0.5;\n}\n\n.combobox__button:hover,\n.combobox__button:focus {\n  background-color: #bbbbbb;\n  color: #000;\n}\n\n.combobox__data {\n  display: flex;\n  flex-direction: column;\n  padding: 4px 0px;\n  position: absolute;\n  width: 100%;\n  top: 100%;\n  left: 0;\n  border-radius: 4px;\n  background-color: #fff;\n  box-shadow: 0px 3px 6px #00000016;\n  z-index: 999;\n}\n\n.combobox__item {\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  line-height: 40px;\n  padding-left: 10px;\n  height: 40px;\n  cursor: pointer;\n  /* border: 1px solid #ccc; */\n  outline: none;\n}\n\n.combobox__item-icon {\n  width: 16px;\n  height: 16px;\n  font-size: 16px;\n  margin-right: 10px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.combobox__item-icon--selected {\n  width: 14px;\n  height: 11px;\n}\n\n.combobox__item:hover,\n.combobox__item:focus,\n.combobox__item--focus,\n.combobox__item--hover {\n  background-color: #e9ebee;\n  color: #000;\n}\n\n.combobox__item--selected {\n  pointer-events: none;\n  background-color: #019160;\n  color: #fff;\n}\n</style>"],"mappings":";;;EACOA,KAAK,EAAC;AAAU;;;;EAyBjBA,KAAK,EAAC,gBAAgB;EACtBC,GAAG,EAAC;;;;EAmBGD,KAAK,EAAC;AAAqB;;;;uBA7CtCE,mBAAA,CA0DM,OA1DNC,UA0DM,G,gBAzDJC,mBAAA,CAME;IALAC,IAAI,EAAC,MAAM;IACXL,KAAK,EAAC,uBAAuB;+DACpBM,KAAA,CAAAC,SAAS,GAAAC,MAAA;IACjBC,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,QAAA,CAAAC,aAAA,IAAAD,QAAA,CAAAC,aAAA,IAAAF,IAAA,CAAa;IACpBG,SAAO,EAAAJ,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,QAAA,CAAAG,eAAA,IAAAH,QAAA,CAAAG,eAAA,IAAAJ,IAAA,CAAe;iEAFhBL,KAAA,CAAAC,SAAS,E,GAIpBH,mBAAA,CAcS;IAbPJ,KAAK,EAAC,yBAAyB;IAC9BgB,OAAK,EAAAN,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,QAAA,CAAAK,oBAAA,IAAAL,QAAA,CAAAK,oBAAA,IAAAN,IAAA,CAAoB;IAC3BG,SAAO,EAAAJ,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,QAAA,CAAAG,eAAA,IAAAH,QAAA,CAAAG,eAAA,IAAAJ,IAAA,CAAe;IACzBO,QAAQ,EAAC;MAETC,mBAAA,gDAAiD,EACjDf,mBAAA,CAME;IALCgB,GAAG,EAAEC,OAAO;IACbC,GAAG,EAAC,EAAE;IACNC,MAAM,EAAC,EAAE;IACTC,KAAK,EAAC,IAAI;IACVC,MAAM,EAAC;kEAIHnB,KAAA,CAAAoB,cAAc,G,+BADtBxB,mBAAA,CAkCM,OAlCNyB,UAkCM,I,kBA5BJzB,mBAAA,CA2BI0B,SAAA,QAAAC,WAAA,CAzBsBvB,KAAA,CAAAwB,UAAU,GAA1BC,IAAI,EAAEC,KAAK;yBAFrB9B,mBAAA,CA2BI;MA1BFF,KAAK,EAAAiC,eAAA,EAAC,gBAAgB;iCAEuBD,KAAK,IAAI1B,KAAA,CAAA4B,cAAc;oCAAwCF,KAAK,IAAI1B,KAAA,CAAA6B;;MAIpHC,GAAG,EAAEL,IAAI,MAAMM,SAAS;;MACxBpC,GAAG,eAAe+B,KAAK;MACvBM,KAAK,EAAEP,IAAI,MAAMM,SAAS;MAC1BrB,OAAK,EAAAR,MAAA,IAAEI,QAAA,CAAA2B,YAAY,CAACR,IAAI,EAAEC,KAAK;MAC/BQ,OAAK,EAAAhC,MAAA,IAAEI,QAAA,CAAA6B,aAAa,CAACT,KAAK;MAC1BlB,SAAO,EAAAN,MAAA,IAAEI,QAAA,CAAAG,eAAe,CAACiB,KAAK;MAC9BU,OAAK,EAAAlC,MAAA,IAAEI,QAAA,CAAAG,eAAe,CAACiB,KAAK;MAC7Bd,QAAQ,EAAC;QAETd,mBAAA,CASM,OATNuC,UASM,G,gBARJvC,mBAAA,CAOE;MALCgB,GAAG,EAAEC,OAAO;MACbC,GAAG,EAAC,EAAE;MACNC,MAAM,EAAC,EAAE;MACTC,KAAK,EAAC,IAAI;MACVC,MAAM,EAAC;mDALCO,KAAK,IAAI1B,KAAA,CAAA6B,iBAAiB,E,KAQtC/B,mBAAA,CAAsC,cAAAwC,gBAAA,CAA7Bb,IAAI,MAAMc,QAAQ,kB;gEA5BbjC,QAAA,CAAAkC,YAAY,E"},"metadata":{},"sourceType":"module","externalDependencies":[]}